

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A Sudoku Problem formulated as an LP &mdash; PuLP 3.2.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7895512d"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="A Transportation Problem" href="a_transportation_problem.html" />
    <link rel="prev" title="A Set Partitioning Problem" href="a_set_partitioning_problem.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PuLP
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../main/index.html">Main Topics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Case Studies</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="a_blending_problem.html">A Blending Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="a_set_partitioning_problem.html">A Set Partitioning Problem</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">A Sudoku Problem formulated as an LP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#problem-description">Problem Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formulation">Formulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#identify-the-decision-variables">Identify the Decision Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#formulate-the-objective-function">Formulate the Objective Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#formulate-the-constraints">Formulate the Constraints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#solution">Solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extra-for-experts">Extra for Experts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="a_transportation_problem.html">A Transportation Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="a_two_stage_production_planning_problem.html">A Two Stage Production Planning Problem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical/index.html">PuLP Internal Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PuLP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Case Studies</a></li>
      <li class="breadcrumb-item active">A Sudoku Problem formulated as an LP</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/CaseStudies/a_sudoku_problem.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="a-sudoku-problem-formulated-as-an-lp">
<h1>A Sudoku Problem formulated as an LP<a class="headerlink" href="#a-sudoku-problem-formulated-as-an-lp" title="Link to this heading"></a></h1>
<section id="problem-description">
<h2>Problem Description<a class="headerlink" href="#problem-description" title="Link to this heading"></a></h2>
<p>A <a class="reference external" href="http://en.wikipedia.org/wiki/Sudoku">sudoku problem</a> is a problem with an incomplete 9x9 table of numbers that must be filled according
to several rules:</p>
<ul class="simple">
<li><p>Within any of the 9 individual 3x3 boxes, each of the numbers 1 to 9 must be
found.</p></li>
<li><p>Within any column of the 9x9 grid, each of the numbers 1 to 9 must be found.</p></li>
<li><p>Within any row of the 9x9 grid, each of the numbers 1 to 9 must be found.</p></li>
</ul>
<p>On this page we will formulate the problem below (from wikipedia) as a model using PuLP.
Once created, our code will need little modification to solve any sudoku problem.</p>
<img alt="../_images/wikisudokuproblem.jpg" src="../_images/wikisudokuproblem.jpg" />
</section>
<section id="formulation">
<h2>Formulation<a class="headerlink" href="#formulation" title="Link to this heading"></a></h2>
<section id="identify-the-decision-variables">
<h3>Identify the Decision Variables<a class="headerlink" href="#identify-the-decision-variables" title="Link to this heading"></a></h3>
<p>In order to formulate this problem as a linear program, we could simply create
a variable for each of the 81 squares between 1 and 9 representing the value in
that square. However, this is awfully complicated because in linear programming there is no “not equal to” operator and so we cannot use the necessary constraints of no squares within a
box/row/column being equal in value to each other. Whilst we can ensure the sum
of all the values in a box/row/column equal 45, this will still result in many
solutions satisfying the 45 constraint but still with 2 of the same number in
the same box/row/column. There is a solution for this using Big M constraints that compare for each pair of values in a box/column/row which number is strictly smaller than the other but we prefer to present an approach that is much more elegant:</p>
<p>We create 729 individual binary (0-1) problem variables. These
represent 9 problem variables per square for each of 81 squares, where the 9
variables each correspond to the number that might be in that square. The
binary nature of the variable says whether the existence of that number in that
square is true or false. Therefore, there can clearly be only 1 of the 9
variables for each square as true (1) and the other 8 must be false (0) since
only one number can be placed into any square. This will become clear below.</p>
</section>
<section id="formulate-the-objective-function">
<h3>Formulate the Objective Function<a class="headerlink" href="#formulate-the-objective-function" title="Link to this heading"></a></h3>
<p>Interestingly, with sudoku there is no solution that is better than another
solution, since a solution by definition must satisfy all the constraints.
Therefore, we are not really trying to minimise or maximise anything, we are
just trying to find the values on our variables that satisfy the constraints.
Thus, we neither set <code class="xref py py-attr docutils literal notranslate"><span class="pre">LpMinimize</span></code> or <code class="xref py py-attr docutils literal notranslate"><span class="pre">LpMaximize</span></code> nor define an objective function.</p>
</section>
<section id="formulate-the-constraints">
<h3>Formulate the Constraints<a class="headerlink" href="#formulate-the-constraints" title="Link to this heading"></a></h3>
<p>These are simply the known constraints of a sudoku problem plus the constraints
on our own created variables we have used to express the features of the
problem:</p>
<ul class="simple">
<li><p>The values in the squares in any row must be each of 1 to 9.</p></li>
<li><p>The values in the squares in any column must be each of 1 to 9.</p></li>
<li><p>The values in the squares in any box must be each of 1 to 9.
(a box is one of the 9 non-overlapping 3x3 grids within the overall 9x9 grid)</p></li>
<li><p>There must be only one number within any square (seems logically obvious, but
it is important to our formulation to ensure because of our variable choices).</p></li>
<li><p>The starting sudoku numbers must be in those same places in the final
solution (this is a constraint since these numbers are not changeable in the
actual problem, whereas we can control any other numbers. If none or very few
starting numbers were present, the sudoku problem would have a very large
number of feasible solutions, instead of just one).</p></li>
</ul>
</section>
</section>
<section id="solution">
<h2>Solution<a class="headerlink" href="#solution" title="Link to this heading"></a></h2>
<p>The introductory commenting and import statement are entered</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The Sudoku Problem Formulation for the PuLP Modeller</span>

<span class="sd">Authors: Antony Phillips, Dr Stuart Mitchell</span>
<span class="sd">edited by Nathan Sudermann-Merx</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Import PuLP modeler functions</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pulp</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>In the unique case of the sudoku problem, the row names, column names and variable option values are all the exact same list of numbers from 1 to 9.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># All rows, columns and values within a Sudoku take values from 1 to 9</span>
<span class="n">VALS</span> <span class="o">=</span> <span class="n">ROWS</span> <span class="o">=</span> <span class="n">COLS</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>A list called <cite>Boxes</cite> is created with 9 elements, each being another list. These 9 lists correspond to each of the 9 boxes, and each of the lists contains tuples as the elements with the row and column indices for each square in that box. Explicitly entering the values in a similar way to the following would have had the same effect (but would have been a waste of time):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The boxes list is created, with the row and column index of each square in each box</span>
<span class="n">Boxes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Therefore, Boxes[0] will return a list of tuples containing the locations of each of the 9 squares in the first box.</p>
<p>The prob variable is created to contain the problem data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The prob variable is created to contain the problem data</span>
<span class="n">prob</span> <span class="o">=</span> <span class="n">LpProblem</span><span class="p">(</span><span class="s2">&quot;Sudoku Problem&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The 729 problem variables are created since the <cite>(Vals,Rows,Cols)</cite> creates a variable for each combination of value, row and column. An example variable would be: Choice_4_2_9, and it is defined to be a binary variable (able to take only the integers 1 or 0. If Choice_4_2_9 was 1, it would mean the number 4 was present in the square situated in row 2, column 9. (If it was 0, it would mean there was not a 4 there)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The decision variables are created</span>
<span class="n">choices</span> <span class="o">=</span> <span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s2">&quot;Choice&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">VALS</span><span class="p">,</span> <span class="n">ROWS</span><span class="p">,</span> <span class="n">COLS</span><span class="p">),</span> <span class="n">cat</span><span class="o">=</span><span class="s2">&quot;Binary&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>As explained above, we don’t define an objective function since we are only concerned with any variable combination that can satisfy the constraints.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># We do not define an objective function since none is needed</span>
</pre></div>
</div>
<p>Since there are 9 variables for each square, it is important to specify that only exactly one of them can take the value of 1 (and the rest are 0). Therefore, the below code reads: for each of the 81 squares, the sum of all the 9 variables (each representing a value that could be there) relating to that particular square must equal 1.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># A constraint ensuring that only one value can be in each square is created</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ROWS</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">COLS</span><span class="p">:</span>
        <span class="n">prob</span> <span class="o">+=</span> <span class="n">lpSum</span><span class="p">([</span><span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">VALS</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<p>These constraints ensure that each number (value) can only occur once in each row, column and box.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The row, column and box constraints are added for each value</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">VALS</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ROWS</span><span class="p">:</span>
        <span class="n">prob</span> <span class="o">+=</span> <span class="n">lpSum</span><span class="p">([</span><span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">COLS</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">COLS</span><span class="p">:</span>
        <span class="n">prob</span> <span class="o">+=</span> <span class="n">lpSum</span><span class="p">([</span><span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ROWS</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">Boxes</span><span class="p">:</span>
        <span class="n">prob</span> <span class="o">+=</span> <span class="n">lpSum</span><span class="p">([</span><span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="ow">in</span> <span class="n">b</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The starting numbers are entered as constraints i.e a 5 in row 1 column 1 is true.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The starting numbers are entered as constraints</span>
<span class="n">input_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">input_data</span><span class="p">:</span>
    <span class="n">prob</span> <span class="o">+=</span> <span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The problem is written to an LP file, solved using PuLP’s choice of solver and the solution status is printed to the screen</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The problem data is written to an .lp file</span>
<span class="n">prob</span><span class="o">.</span><span class="n">writeLP</span><span class="p">(</span><span class="s2">&quot;Sudoku.lp&quot;</span><span class="p">)</span>

<span class="c1"># The problem is solved using PuLP&#39;s choice of Solver</span>
<span class="n">prob</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>

<span class="c1"># The status of the solution is printed to the screen</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Status:&quot;</span><span class="p">,</span> <span class="n">LpStatus</span><span class="p">[</span><span class="n">prob</span><span class="o">.</span><span class="n">status</span><span class="p">])</span>
</pre></div>
</div>
<p>Instead of printing out all 729 of the binary problem variables and their respective values, it is more meaningful to draw the solution in a text file. The code also puts lines inbetween every third row and column to make the solution easier to read. The sudokuout.txt file is created in the same folder as the .py file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># A file called sudokuout.txt is created/overwritten for writing to</span>
<span class="n">sudokuout</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sudokuout.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>

<span class="c1"># The solution is written to the sudokuout.txt file</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ROWS</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">r</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]:</span>
        <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;+-------+-------+-------+</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">COLS</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">VALS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">(</span><span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]:</span>
                    <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;| &quot;</span><span class="p">)</span>
                <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
                    <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;|</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;+-------+-------+-------+&quot;</span><span class="p">)</span>
<span class="n">sudokuout</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>A note of the location of the solution is printed to the solution</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The location of the solution is give to the user</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Solution Written to sudokuout.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The full file above is given provided <a class="reference download internal" download="" href="../_downloads/cacc92c35b26256ba56639fb3468a7ea/Sudoku1.py"><code class="xref download docutils literal notranslate"><span class="pre">Sudoku1.py</span></code></a>
The final solution should be the following:</p>
<img alt="../_images/wikisudokusolution.jpg" src="../_images/wikisudokusolution.jpg" />
</section>
<section id="extra-for-experts">
<h2>Extra for Experts<a class="headerlink" href="#extra-for-experts" title="Link to this heading"></a></h2>
<p>In the above formulation we did not consider the fact that there may be multiple solutions if the sudoku problem is not well defined.</p>
<p>We can make our code return all the solutions by editing our code as shown after the <cite>prob.writeLP</cite> line. Essentially we are just looping over the solve statement, and each time after a successful solve, adding a constraint that the same solution cannot be used again. When there are no more solutions, our program ends.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">prob</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
    <span class="c1"># The status of the solution is printed to the screen</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Status:&quot;</span><span class="p">,</span> <span class="n">LpStatus</span><span class="p">[</span><span class="n">prob</span><span class="o">.</span><span class="n">status</span><span class="p">])</span>
    <span class="c1"># The solution is printed if it was deemed &quot;optimal&quot; i.e met the constraints</span>
    <span class="k">if</span> <span class="n">LpStatus</span><span class="p">[</span><span class="n">prob</span><span class="o">.</span><span class="n">status</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Optimal&quot;</span><span class="p">:</span>
        <span class="c1"># The solution is written to the sudokuout.txt file</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ROWS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]:</span>
                <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;+-------+-------+-------+</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">COLS</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">VALS</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span><span class="p">(</span><span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]:</span>
                            <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;| &quot;</span><span class="p">)</span>
                        <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
                            <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;|</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sudokuout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;+-------+-------+-------+</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># The constraint is added that the same solution cannot be returned again</span>
        <span class="n">prob</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="n">lpSum</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">VALS</span>
                    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ROWS</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">COLS</span>
                    <span class="k">if</span> <span class="n">value</span><span class="p">(</span><span class="n">choices</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="o">&lt;=</span> <span class="mi">80</span>
        <span class="p">)</span>
    <span class="c1"># If a new optimal solution cannot be found, we end the program</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">break</span>
<span class="n">sudokuout</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The full file using this is available <a class="reference download internal" download="" href="../_downloads/d356768bf79aca3aa388756032219f38/Sudoku2.py"><code class="xref download docutils literal notranslate"><span class="pre">Sudoku2.py</span></code></a>. When using this code for sudoku problems with a large number of solutions, it could take a very long time to solve them all. To create sudoku problems with multiple solutions from unique solution sudoku problem, you can simply delete a starting number constraint. You may find that deleting several constraints will still lead to a single optimal solution but the removal of one particular constraint leads to a sudden dramatic increase in the number of solutions.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="a_set_partitioning_problem.html" class="btn btn-neutral float-left" title="A Set Partitioning Problem" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="a_transportation_problem.html" class="btn btn-neutral float-right" title="A Transportation Problem" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-, pulp documentation team..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>