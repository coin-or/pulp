<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A Transportation Problem &mdash; PuLP 2.6.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="A Two Stage Production Planning Problem" href="a_two_stage_production_planning_problem.html" />
    <link rel="prev" title="A Sudoku Problem formulated as an LP" href="a_sudoku_problem.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> PuLP
          </a>
              <div class="version">
                2.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../main/index.html">Main Topics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Case Studies</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="a_blending_problem.html">A Blending Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="a_set_partitioning_problem.html">A Set Partitioning Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="a_sudoku_problem.html">A Sudoku Problem formulated as an LP</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">A Transportation Problem</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#problem-description">Problem Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formulation">Formulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#identify-the-decision-variables">Identify the Decision Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#formulate-the-objective-function">Formulate the Objective Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#formulate-the-constraints">Formulate the Constraints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pulp-model">PuLP Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extensions">Extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#validation">Validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#storage-and-buying-in">Storage and “Buying In”</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#presentation-of-solution-and-analysis">Presentation of Solution and Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ongoing-monitoring">Ongoing Monitoring</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="a_two_stage_production_planning_problem.html">A Two Stage Production Planning Problem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical/index.html">PuLP Internal Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PuLP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Case Studies</a> &raquo;</li>
      <li>A Transportation Problem</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/CaseStudies/a_transportation_problem.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="a-transportation-problem">
<h1>A Transportation Problem<a class="headerlink" href="#a-transportation-problem" title="Permalink to this heading"></a></h1>
<section id="problem-description">
<h2>Problem Description<a class="headerlink" href="#problem-description" title="Permalink to this heading"></a></h2>
<p>A boutique brewery has two warehouses from which it distributes beer to five
carefully chosen bars. At the start of every week, each bar sends an order to
the brewery’s head office for so many crates of beer, which is then dispatched
from the appropriate warehouse to the bar. The brewery would like to have an
interactive computer program which they can run week by week to tell them which
warehouse should supply which bar so as to minimize the costs of the whole
operation. For example, suppose that at the start of a given week the brewery
has 1000 cases at warehouse A, and 4000 cases at warehouse B, and that the bars
require 500, 900, 1800, 200, and 700 cases respectively. Which warehouse should
supply which bar?</p>
</section>
<section id="formulation">
<h2>Formulation<a class="headerlink" href="#formulation" title="Permalink to this heading"></a></h2>
<p>For transportation problems, using a graphical representation of the problem
is often helpful during formulation. Here is a graphical representation of The
Beer Distribution Problem.</p>
<img alt="../_images/brewery_nodes.jpg" src="../_images/brewery_nodes.jpg" />
<section id="identify-the-decision-variables">
<h3>Identify the Decision Variables<a class="headerlink" href="#identify-the-decision-variables" title="Permalink to this heading"></a></h3>
<p>In transportation problems we are deciding how to transport goods from their
supply nodes to their demand nodes. The decision variables are the Arcs
connecting these nodes, as shown in the diagram below. We are deciding how many
crates of beer to transport from each warehouse to each pub.</p>
<img alt="../_images/brewery_arcs.jpg" src="../_images/brewery_arcs.jpg" />
<ul class="simple">
<li><p>A1 = number of crates of beer to ship from Warehouse A to Bar 1</p></li>
<li><p>A5 = number of crates of beer to ship from Warehouse A to Bar 5</p></li>
<li><p>B1 = number of crates of beer to ship from Warehouse B to Bar 1</p></li>
<li><p>B5 = number of crates of beer to ship from Warehouse B to Bar 5</p></li>
</ul>
<p>Let:</p>
<div class="math notranslate nohighlight">
\[\begin{split}W &amp;= \{A,B\} \\
B &amp;= \{1, 2, 3, 4, 5 \} \\
x_{(w,b)} &amp;\ge 0 \ldots \forall w \in W, b \in B \\
x_{(w,b)} &amp; \in \mathbb{Z}^+ \ldots \forall w \in W, b \in B \\\end{split}\]</div>
<p>The lower bound on the variables is Zero, and the values must all be Integers
(since the number of crates cannot be negative or fractional). There is no
upper bound.</p>
</section>
<section id="formulate-the-objective-function">
<h3>Formulate the Objective Function<a class="headerlink" href="#formulate-the-objective-function" title="Permalink to this heading"></a></h3>
<p>The objective function has been loosely defined as cost. The problem can only be
formulated as a linear program if the cost of transportation from warehouse to
pub is a linear function of the amounts of crates transported. Note that this is
sometimes not the case. This may be due to factors such as economies of scale or
fixed costs. For example, transporting 10 crates may not cost 10 times as much
as transporting one crate, since it may be the case that one truck can
accommodate 10 crates as easily as one. Usually in this situation there are
fixed costs in operating a truck which implies that the costs go up in jumps
(when an extra truck is required). In these situations, it is possible to model
such a cost by using zero-one integer variables: we will look at this later in
the course.</p>
<p>We shall assume then that there is a fixed transportation cost per crate. (If
the capacity of a truck is small compared with the number of crates that must be
delivered then this is a valid assumption). Lets assume we talk with the
financial manager, and she gives us the following transportation costs (dollars
per crate):</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 79%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>From Warehouse to Bar</p></th>
<th class="head"><p>A</p></th>
<th class="head"><p>B</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>2</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>4</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>5</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>2</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="simple">
<dt>Minimise the Transporting Costs = Cost per crate for RouteA1 * A1 (number of crates on RouteA1)</dt><dd><p>+ …
+ Cost per crate for RouteB5 * B5 (number of crates on RouteB5)</p>
</dd>
</dl>
<div class="math notranslate nohighlight">
\[\min \sum_{w \in W, b \in B} c_{(w,b)} x_{(w,b)}\]</div>
</section>
<section id="formulate-the-constraints">
<h3>Formulate the Constraints<a class="headerlink" href="#formulate-the-constraints" title="Permalink to this heading"></a></h3>
<p>The constraints come from considerations of supply and demand. The supply of
beer at warehouse A is 1000 cases. The total amount of beer shipped from
warehouse A cannot exceed this amount. Similarly, the amount of beer shipped
from warehouse B cannot exceed the supply of beer at warehouse B. The sum of
the values on all the arcs leading out of a warehouse, must be less than or
equal to the supply value at that warehouse:</p>
<p>Such that:</p>
<ul class="simple">
<li><p>A1 + A2 + A3 + A4 + A5 &lt;= 1000</p></li>
<li><p>B1 + B2 + B3 + B4 + B5 &lt;= 4000</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\sum_{ b \in B} x_{(w,b)} &lt;= s_w \ldots \forall w \in W\]</div>
<p>The demand for beer at bar 1 is 500 cases, so the amount of beer delivered there
must be at least 500 to avoid lost sales. Similarly, considering the amounts
delivered to the other bars must be at least equal to the demand at those bars.
Note, we are assuming there are no penalties for oversupplying bars (other than
the extra transportation cost we incur). We can _balance_ the transportation
problem to make sure that demand is met exactly - there will be more on this
later. For now, the sum of the values on all the arcs leading into a bar, must
be greater than or equal to the demand value at that bar:</p>
<ul class="simple">
<li><p>A1 + B1 &gt;= 500</p></li>
<li><p>A2 + B2 &gt;= 900</p></li>
<li><p>A3 + B3 &gt;= 1800</p></li>
<li><p>A4 + B4 &gt;= 200</p></li>
<li><p>A5 + B5 &gt;= 700</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\sum_{ w \in W} x_{(w,b)} &gt;= d_b \ldots \forall b \in B\]</div>
<p>Finally, we have already specified the amount of beer shipped must be
non-negative.</p>
</section>
</section>
<section id="pulp-model">
<h2>PuLP Model<a class="headerlink" href="#pulp-model" title="Permalink to this heading"></a></h2>
<p>Whilst the LP as defined above could be formulated into Python code in the same
way as the <cite>A Blending Problem</cite> (Whiskas), for Transportation Problems, there is
a more efficient way which we will use in this course. The example file for this
problem is found in the examples directory BeerDistributionProblem.py</p>
<p>First, start your Python file with a heading and the import PuLP statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The Beer Distribution Problem for the PuLP Modeller</span>

<span class="sd">Authors: Antony Phillips, Dr Stuart Mitchell  2007</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Import PuLP modeler functions</span>
<span class="kn">from</span> <span class="nn">pulp</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>The start of the formulation is a simple definition of the nodes and their limits/capacities. The node names are put into lists, and their associated capacities are put into dictionaries with the node names as the reference keys:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a list of all the supply nodes</span>
<span class="n">Warehouses</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">]</span>

<span class="c1"># Creates a dictionary for the number of units of supply for each supply node</span>
<span class="n">supply</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">4000</span><span class="p">}</span>

<span class="c1"># Creates a list of all demand nodes</span>
<span class="n">Bars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">]</span>

<span class="c1"># Creates a dictionary for the number of units of demand for each demand node</span>
<span class="n">demand</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
    <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span>
    <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="mi">1800</span><span class="p">,</span>
    <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="s2">&quot;5&quot;</span><span class="p">:</span> <span class="mi">700</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The cost data is then inputted into a list, with two sub lists: the first
containing the costs of shipping from Warehouse A, and the second containing the
costs of shipping from Warehouse B. Note here that the commenting and structure
of the code makes the data appear as a table for easy editing. The <cite>Warehouses</cite>
and <cite>Bars</cite> lists (Supply and Demand nodes) are added to make a large list (of
all nodes) and inputted into PuLPs <cite>makeDict</cite> function. The second parameter is
the costs list as was previously created, and the last parameter sets the
default value for an arc cost. Once the cost dictionary is created, if
<cite>costs[“A”][“1”]</cite> is called, it will return the cost of transporting from
warehouse A to bar 1, 2. If <cite>costs[“C”][“2”]</cite> is called, it will return 0, since
this is the defined default.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a list of costs of each transportation path</span>
<span class="n">costs</span> <span class="o">=</span> <span class="p">[</span>  <span class="c1"># Bars</span>
    <span class="c1"># 1 2 3 4 5</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>  <span class="c1"># A   Warehouses</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>  <span class="c1"># B</span>
<span class="p">]</span>

<span class="c1"># The cost data is made into a dictionary</span>
<span class="n">costs</span> <span class="o">=</span> <span class="n">makeDict</span><span class="p">([</span><span class="n">Warehouses</span><span class="p">,</span> <span class="n">Bars</span><span class="p">],</span> <span class="n">costs</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>prob</cite> variable is created using the <cite>LpProblem</cite> function, with the usual
input parameters.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates the &#39;prob&#39; variable to contain the problem data</span>
<span class="n">prob</span> <span class="o">=</span> <span class="n">LpProblem</span><span class="p">(</span><span class="s2">&quot;Beer Distribution Problem&quot;</span><span class="p">,</span> <span class="n">LpMinimize</span><span class="p">)</span>
</pre></div>
</div>
<p>A list of tuples is created containing all the arcs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a list of tuples containing all the possible routes for transport</span>
<span class="n">Routes</span> <span class="o">=</span> <span class="p">[(</span><span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">Warehouses</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">Bars</span><span class="p">]</span>
</pre></div>
</div>
<p>A dictionary called <cite>vars</cite> is created which contains the LP variables. The
reference keys to the dictionary are the warehouse name, then the bar
name(<cite>[“A”][“2”]</cite>) , and the data is <cite>Route_Tuple</cite>. (e.g. <cite>[“A”][“2”]</cite>:
Route_A_2). The lower limit of zero is set, the upper limit of <cite>None</cite> is set,
and the variables are defined to be Integers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># A dictionary called &#39;Vars&#39; is created to contain the referenced variables(the routes)</span>
<span class="nb">vars</span> <span class="o">=</span> <span class="n">LpVariable</span><span class="o">.</span><span class="n">dicts</span><span class="p">(</span><span class="s2">&quot;Route&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">Warehouses</span><span class="p">,</span> <span class="n">Bars</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">LpInteger</span><span class="p">)</span>
</pre></div>
</div>
<p>The objective function is added to the variable <cite>prob</cite> using a list
comprehension. Since <cite>vars</cite> and <cite>costs</cite> are now dictionaries (with further
internal dictionaries), they can be used as if they were tables, as <cite>for (w,b)
in Routes</cite> will cycle through all the combinations/arcs. Note that <cite>i</cite> and <cite>j</cite>
could have been used, but <cite>w</cite> and <cite>b</cite> are more meaningful.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The objective function is added to &#39;prob&#39; first</span>
<span class="n">prob</span> <span class="o">+=</span> <span class="p">(</span>
    <span class="n">lpSum</span><span class="p">([</span><span class="nb">vars</span><span class="p">[</span><span class="n">w</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">*</span> <span class="n">costs</span><span class="p">[</span><span class="n">w</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="k">for</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="ow">in</span> <span class="n">Routes</span><span class="p">]),</span>
    <span class="s2">&quot;Sum_of_Transporting_Costs&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The supply and demand constraints are added using a normal <cite>for</cite> loop and a list
comprehension. Supply Constraints: For each warehouse in turn, the values of the
decision variables (number of beer cases on arc) to each of the bars is summed,
and then constrained to being less than or equal to the supply max for that
warehouse. Demand Constraints: For each bar in turn, the values of the decision
variables (number on arc) from each of the warehouses is summed, and then
constrained to being greater than or equal to the demand minimum.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># The supply maximum constraints are added to prob for each supply node (warehouse)</span>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">Warehouses</span><span class="p">:</span>
    <span class="n">prob</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="n">lpSum</span><span class="p">([</span><span class="nb">vars</span><span class="p">[</span><span class="n">w</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">Bars</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="n">supply</span><span class="p">[</span><span class="n">w</span><span class="p">],</span>
        <span class="s2">&quot;Sum_of_Products_out_of_Warehouse_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">w</span><span class="p">,</span>
    <span class="p">)</span>

<span class="c1"># The demand minimum constraints are added to prob for each demand node (bar)</span>
<span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">Bars</span><span class="p">:</span>
    <span class="n">prob</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="n">lpSum</span><span class="p">([</span><span class="nb">vars</span><span class="p">[</span><span class="n">w</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">Warehouses</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="n">demand</span><span class="p">[</span><span class="n">b</span><span class="p">],</span>
        <span class="s2">&quot;Sum_of_Products_into_Bar</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">b</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Following this is the <cite>prob.writeLP</cite> line, and the rest as explained in previous
examples.</p>
<p>The code for this example is found in <a class="reference download internal" download="" href="../_downloads/45155a63b57e7f41dfa18371f4788bf4/BeerDistributionProblem.py"><code class="xref download docutils literal notranslate"><span class="pre">BeerDistributionProblem.py</span></code></a></p>
<p>You will notice that the linear programme solution was also an integer solution.
As long as Supply and Demand are integers, the linear programming solution will
always be an integer. Read about naturally integer solutions for more details.</p>
</section>
<section id="extensions">
<h2>Extensions<a class="headerlink" href="#extensions" title="Permalink to this heading"></a></h2>
<section id="validation">
<h3>Validation<a class="headerlink" href="#validation" title="Permalink to this heading"></a></h3>
<p>Since we have guaranteed the Supply and Demand are integer, we know that the
solution to the linear programme will be integer, so we don’t need to check the
integrality of the solution.</p>
</section>
<section id="storage-and-buying-in">
<h3>Storage and “Buying In”<a class="headerlink" href="#storage-and-buying-in" title="Permalink to this heading"></a></h3>
<p>Transportation models are usually _balanced_, i.e., the total supply = the total
demand. This is because extra supply usually must be stored somewhere (with an
associated storage cost) and extra demand is usually satisfied by purchasing
extra goods from alternative sources (this is know as “buying in” extra goods)
or by substituting another product (incurring a penalty cost).</p>
<p>In The Beer Distribution Problem, the total supply is 5000 cases of beer, but
the total demand is only for 4100 cases. The extra supply can be sent to an
_dummy_ demand node. The cost of flow going to the dummy demand node is then the
storage cost at each of the supply nodes.</p>
<img alt="../_images/extra_supply.jpg" src="../_images/extra_supply.jpg" />
<p>This is added into the above model very simply. Since the objective function and
constraints all operated on the original supply, demand and cost
lists/dictionaries, the only changes that must be made to include another demand node are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a dictionary for the number of units of supply for each supply node</span>
<span class="n">supply</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">4000</span><span class="p">}</span>

<span class="c1"># Creates a list of all demand nodes</span>
<span class="n">Bars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">]</span>

<span class="c1"># Creates a dictionary for the number of units of demand for each demand node</span>
<span class="n">demand</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="mi">1800</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">:</span> <span class="mi">700</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">}</span>

<span class="c1"># Creates a list of costs of each transportation path</span>
<span class="n">costs</span> <span class="o">=</span> <span class="p">[</span>  <span class="c1"># Bars</span>
    <span class="c1"># 1 2 3 4 5 D</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>  <span class="c1"># A   Warehouses</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>  <span class="c1"># B</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <cite>Bars</cite> list is expanded and the <cite>Demand</cite> dictionary is expanded to make the
Dummy Demand require 900 crates, to balance the problem. The cost list is also
expanded, to show the cost of “sending to the Dummy Node” which is realistically
just leaving the stock at the warehouses. This may have an associated cost which
could be entered here instead of the zeros. Note that the solution could still
be solved when there was an unbalanced excess supply.</p>
<p>If a transportation problem has more demand than supply, we can balance the
problem using a dummy supply node. Note that with excess demand, the problem is
“Infeasible” when unbalanced.</p>
<p>Assume there has been a production problem and only 4000 cases of beer could be
produced. Since the total demand is 4100, we need to get extra cases of beer from the dummy supply node.</p>
<p>The code for this example is found in <a class="reference download internal" download="" href="../_downloads/4745d398775f7e4f6826151e0b455ffe/BeerDistributionProblemWarehouseExtension.py"><code class="xref download docutils literal notranslate"><span class="pre">BeerDistributionProblemWarehouseExtension.py</span></code></a></p>
<img alt="../_images/extra_demand.jpg" src="../_images/extra_demand.jpg" />
<p>This dummy supply node is added in simply and logically into the <cite>Warehouse</cite>
list, <cite>Supply</cite> dictionary, and <cite>costs</cite> list. The Supply value is chosen to
balance the problem, and cost of transport is zero to all demand nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a list of all the supply nodes</span>
<span class="n">Warehouses</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">]</span>

<span class="c1"># Creates a dictionary for the number of units of supply for each supply node</span>
<span class="n">supply</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>

<span class="c1"># Creates a list of all demand nodes</span>
<span class="n">Bars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">]</span>

<span class="c1"># Creates a dictionary for the number of units of demand for each demand node</span>
<span class="n">demand</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
    <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span>
    <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="mi">1800</span><span class="p">,</span>
    <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="s2">&quot;5&quot;</span><span class="p">:</span> <span class="mi">700</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Creates a list of costs of each transportation path</span>
<span class="n">costs</span> <span class="o">=</span> <span class="p">[</span>  <span class="c1"># Bars</span>
    <span class="c1"># 1 2 3 4 5</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>  <span class="c1"># A   Warehouses</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>  <span class="c1"># B</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The code for this example is found in <a class="reference download internal" download="" href="../_downloads/5c15f3665ca1a4bca83e0c236bb86562/BeerDistributionProblemCompetitorExtension.py"><code class="xref download docutils literal notranslate"><span class="pre">BeerDistributionProblemCompetitorExtension.py</span></code></a></p>
</section>
</section>
<section id="presentation-of-solution-and-analysis">
<h2>Presentation of Solution and Analysis<a class="headerlink" href="#presentation-of-solution-and-analysis" title="Permalink to this heading"></a></h2>
<p>There are many ways to present the solution to The Beer Distribution Problem:
as a list of shipments, in a table, etc.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRANSPORTATION</span> <span class="n">SOLUTION</span> <span class="o">--</span> <span class="n">Non</span><span class="o">-</span><span class="n">zero</span> <span class="n">shipments</span>
<span class="n">TotalCost</span> <span class="o">=</span> <span class="n">____</span>

<span class="n">Ship</span> <span class="n">___</span> <span class="n">crates</span> <span class="n">of</span> <span class="n">beer</span> <span class="kn">from</span> <span class="nn">warehouse</span> <span class="n">A</span> <span class="n">to</span> <span class="n">pub</span> <span class="mi">1</span>
<span class="n">Ship</span> <span class="n">___</span> <span class="n">crates</span> <span class="n">of</span> <span class="n">beer</span> <span class="kn">from</span> <span class="nn">warehouse</span> <span class="n">A</span> <span class="n">to</span> <span class="n">pub</span> <span class="mi">5</span>
<span class="n">Ship</span> <span class="n">___</span> <span class="n">crates</span> <span class="n">of</span> <span class="n">beer</span> <span class="kn">from</span> <span class="nn">warehouse</span> <span class="n">B</span> <span class="n">to</span> <span class="n">pub</span> <span class="mi">1</span>
<span class="n">Ship</span> <span class="n">___</span> <span class="n">crates</span> <span class="n">of</span> <span class="n">beer</span> <span class="kn">from</span> <span class="nn">warehouse</span> <span class="n">B</span> <span class="n">to</span> <span class="n">pub</span> <span class="mi">2</span>
<span class="n">Ship</span> <span class="n">___</span> <span class="n">crates</span> <span class="n">of</span> <span class="n">beer</span> <span class="kn">from</span> <span class="nn">warehouse</span> <span class="n">B</span> <span class="n">to</span> <span class="n">pub</span> <span class="mi">3</span>
<span class="n">Ship</span> <span class="n">___</span> <span class="n">crates</span> <span class="n">of</span> <span class="n">beer</span> <span class="kn">from</span> <span class="nn">warehouse</span> <span class="n">B</span> <span class="n">to</span> <span class="n">pub</span> <span class="mi">4</span>
</pre></div>
</div>
<p>This information gives rise to the following management summary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>The Beer Distribution Problem
Mike O&#39;Sullivan, 1234567
We are minimising the transportation cost for a brewery operation. The brewery
transports cases of beer from its warehouses to several bars.

The brewery has two warehouses (A and B respectively) and 5 bars (1, 2, 3, 4 and
5).

The supply of crates of beer at the warehouses is:

__________

The forecasted demand (in crates of beer) at the bars is:

__________

The cost of transporting 1 crate of beer from a warehouse to a bar is given in
the following table:

__________

To minimise the transportation cost the brewery should make the following
shipments:

Ship ___ crates of beer from warehouse A to pub 1
Ship ___ crates of beer from warehouse A to pub 5
Ship ___ crates of beer from warehouse B to pub 1
Ship ___ crates of beer from warehouse B to pub 2
Ship ___ crates of beer from warehouse B to pub 3
Ship ___ crates of beer from warehouse B to pub 4

The total transportation cost of this shipping schedule is $_____.
</pre></div>
</div>
</section>
<section id="ongoing-monitoring">
<h2>Ongoing Monitoring<a class="headerlink" href="#ongoing-monitoring" title="Permalink to this heading"></a></h2>
<p>Ongoing Monitoring may take the form of:</p>
<ul class="simple">
<li><p>Updating your data files and resolving as the data changes (changing costs, supplies, demands);</p></li>
<li><p>Resolving our model for new nodes (e.g., new warehouses or bars);</p></li>
<li><p>Looking to see if cheaper transportation options are available along routes where the transportation cost affects the optimal solution (e.g., how much total savings can we get by reducing the transportation cost from Warehouse B to Bar 1).</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="a_sudoku_problem.html" class="btn btn-neutral float-left" title="A Sudoku Problem formulated as an LP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="a_two_stage_production_planning_problem.html" class="btn btn-neutral float-right" title="A Two Stage Production Planning Problem" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-, pulp documentation team..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>